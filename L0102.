#include <Wire.h>
#include "Adafruit_TCS34725.h"

// TCS34725 초기화 (Integration time과 Gain 설정)
Adafruit_TCS34725 tcs = Adafruit_TCS34725(TCS34725_INTEGRATIONTIME_50MS, TCS34725_GAIN_4X);

void setup() {
  Serial.begin(9600);  // 시리얼 통신 시작

  if (tcs.begin()) {
    Serial.println("TCS34725 센서 초기화 성공");
  } else {
    Serial.println("TCS34725 센서 초기화 실패! 연결 상태 확인 요망.");
    while (1);  // 오류 발생 시 멈춤
  }
}

void loop() {
  uint16_t r, g, b, c;

  // 센서에서 RGB 및 Clear 값을 읽음
  tcs.getRawData(&r, &g, &b, &c);

  // 색온도(K) 및 조도(Lux) 계산
  uint16_t colorTemp = tcs.calculateColorTemperature(r, g, b);
  uint16_t lux = tcs.calculateLux(r, g, b);

  // 측정된 값 출력
  Serial.print("Red: "); Serial.print(r);
  Serial.print(" Green: "); Serial.print(g);
  Serial.print(" Blue: "); Serial.print(b);
  Serial.print(" Clear: "); Serial.print(c);
  Serial.print(" Color Temp: "); Serial.print(colorTemp);
  Serial.print(" K - Lux: "); Serial.print(lux);
  Serial.println(" lx");

  delay(1000);  // 1초마다 갱신
}
